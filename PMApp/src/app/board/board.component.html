
<app-side-nav></app-side-nav>
<div class="display-area">
    <div class="header">
        <p *ngIf="!!this.board">Your boards /<span class="bold">{{ this.board.title }}</span></p>
        <button class="create" mat-button (click)="openPopup()">
            create new column+
        </button>
    </div>
    <div class="popup" id="popup">
        <form [formGroup]="Column" (ngSubmit)="createColumn()">
            <div class="board-name">
                <input class="board-name" name="name" type="text" placeholder="New Column" formControlName="title" required>
            </div>
            <mat-divider></mat-divider>
            <div class="buttons">
                <button type="submit" (click)="closePopup()">Submit</button>
                <button (click)="closePopup()">Close</button>
            </div>
        </form>
    </div>
    <div id="taskPopup" class="popup">
        <form (ngSubmit)="createTask()">
            <div class="task-name">
                <input class="task-name" name="name" type="text" placeholder="New task" [(ngModel)]="Task.value.title" required>
            </div>
            <mat-divider></mat-divider>
            <div class="content">
                <div class="description">
                    <mat-form-field class="example-full-width">
                        <mat-label>Write short description</mat-label>
                        <textarea matInput placeholder="This task is.." [(ngModel)]="Task.value.description" [ngModelOptions]="{standalone: true}"></textarea>
                      </mat-form-field>
                </div>
            </div>
            <div class="buttons">
                <button type="submit" (click)="closeTaskPopup()">Submit</button>
                <button (click)="closeTaskPopup()">Close</button>
            </div>
        </form>
    </div>
    <main *ngIf="this.columns.length > 0">
        <mat-grid-list cols="3" rowHeight="400px" [gutterSize]="'1rem'">
            <mat-grid-tile class="card" [colspan]="1" [rowspan]="2" *ngFor="let column of columns">
                <div class="head">
                    {{ column.title }}
                </div>
                <div class="content" *ngFor="let task of column.tasks">
                    <div class="task">
                        <h1>{{ task.title }}</h1>
                        <h3>{{ task.description }}</h3>
                    </div>
                    <button class="remove-button" (click)="removeTask(column._id, task._id)">Remove task (!)</button> 
                </div>
                <div class="btn">
                    <button class="add-button" (click)="openTaskPopup(column._id)">+ Add task</button>
                    <button class="remove-button" (click)="removeColumn(column._id)">Remove Column (!)</button>
                </div>
            </mat-grid-tile>
        </mat-grid-list>
    </main>
</div>